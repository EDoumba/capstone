<div class="chat-window-container">
  <div class="chat-header">
    <div class="chat-partner-info">
      <div class="partner-avatar">
        {{ currentChat?.participant?.name?.charAt(0) }}
      </div>
      <div class="partner-details">
        <h3>{{ currentChat?.participant?.name }}</h3>
        <p>{{ currentChat?.participant?.role | titlecase }}</p>
      </div>
    </div>
    <div class="chat-actions">
      <button mat-icon-button>
        <mat-icon>call</mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon>video_call</mat-icon>
      </button>
      <button mat-icon-button>
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  </div>

  <div class="messages-container" #messagesContainer>
    <div *ngFor="let message of messages" 
         class="message" 
         [class.sent]="message.senderId === currentUserId"
         [class.received]="message.senderId !== currentUserId">
      
      <div class="message-content">
        <p>{{ message.content }}</p>
        <span class="message-time">{{ message.timestamp | date:'shortTime' }}</span>
      </div>
    </div>

    <div *ngIf="messages.length === 0" class="no-messages">
      <mat-icon>chat</mat-icon>
      <h3>No messages yet</h3>
      <p>Start a conversation with {{ currentChat?.participant?.name }}</p>
    </div>
  </div>

  <app-message-input (messageSent)="onMessageSent($event)"></app-message-input>
</div>